@inherits LayoutComponentBase
@inject IDialogService DialogService

<FluentToastProvider Position="ToastPosition.TopCenter" Timeout="10_000"/>
<FluentDialogProvider/>
<FluentTooltipProvider/>
<FluentDesignTheme OnLoaded="@OnLoaded" StorageName="theme" CustomColor="#1E1F22"/>
<CascadingValue Value="@_themeMode">
    <FluentLayout>
        <Header Text="Obaki Bot"/>
        <FluentStack Class="main" Orientation="Orientation.Horizontal" Width="100%">
            <FluentBodyContent Class="body-content">
                <div class="content">
                    @Body
                </div>
            </FluentBodyContent>
        </FluentStack>
    </FluentLayout>
</CascadingValue>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code
{
    private IDialogReference? _dialog;
    private DesignThemeModes _themeMode { get; set; }

    private void OnLoaded(LoadedEventArgs e)
    {
        _themeMode = e.IsDark ? DesignThemeModes.Dark : DesignThemeModes.Light;
    }

    // private async Task OpenSettingsAsync()
    // {
    //     _dialog = await DialogService.ShowPanelAsync<SettingsPanel>(new DialogParameters
    //     {
    //         Alignment = HorizontalAlignment.Right,
    //         Title = "Settings",
    //         PreventScroll = true
    //     });
    //     var result = await _dialog.Result;
    // }
}